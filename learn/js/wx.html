<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小程序 | Sth. I Like</title>
    <meta name="description" content="Sth. I Like">
    <link rel="icon" href="/logo.png">
    <meta name="keywords" content="js,小程序">
    <link rel="preload" href="/assets/css/0.styles.07b453df.css" as="style"><link rel="preload" href="/assets/js/app.6de3ddb6.js" as="script"><link rel="preload" href="/assets/js/17.b63c5e09.js" as="script"><link rel="prefetch" href="/assets/js/10.df41d32e.js"><link rel="prefetch" href="/assets/js/11.236302dd.js"><link rel="prefetch" href="/assets/js/12.09b498ea.js"><link rel="prefetch" href="/assets/js/13.2d3fabc2.js"><link rel="prefetch" href="/assets/js/14.79d01d8b.js"><link rel="prefetch" href="/assets/js/15.b9a02621.js"><link rel="prefetch" href="/assets/js/16.d0371621.js"><link rel="prefetch" href="/assets/js/18.f7890618.js"><link rel="prefetch" href="/assets/js/19.d8181369.js"><link rel="prefetch" href="/assets/js/2.1ca6fe49.js"><link rel="prefetch" href="/assets/js/20.d9ca7871.js"><link rel="prefetch" href="/assets/js/21.08d5417f.js"><link rel="prefetch" href="/assets/js/22.b7d81f2e.js"><link rel="prefetch" href="/assets/js/23.865b0ffa.js"><link rel="prefetch" href="/assets/js/3.6df14d08.js"><link rel="prefetch" href="/assets/js/4.4fea53f6.js"><link rel="prefetch" href="/assets/js/5.cebd0a72.js"><link rel="prefetch" href="/assets/js/6.c7895668.js"><link rel="prefetch" href="/assets/js/7.dc4395cd.js"><link rel="prefetch" href="/assets/js/8.d909864b.js"><link rel="prefetch" href="/assets/js/9.1642cdcb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.07b453df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sth. I Like</span></a> <div class="links" style="max-width:nullpx;"><!----> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Learn</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/learn/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/learn/enhance/" class="nav-link">Enhance</a></li><li class="dropdown-item"><!----> <a href="/learn/js/" class="nav-link router-link-active">JS</a></li><li class="dropdown-item"><!----> <a href="/learn/tool/" class="nav-link">Tool</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Learn</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/learn/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/learn/enhance/" class="nav-link">Enhance</a></li><li class="dropdown-item"><!----> <a href="/learn/js/" class="nav-link router-link-active">JS</a></li><li class="dropdown-item"><!----> <a href="/learn/tool/" class="nav-link">Tool</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/learn/js/" class="sidebar-link">概述</a></li><li><a href="/learn/js/vue2.html" class="sidebar-link">Vue2</a></li><li><a href="/learn/js/vue3.html" class="sidebar-link">Vue3</a></li><li><a href="/learn/js/axios.html" class="sidebar-link">Axios</a></li><li><a href="/learn/js/wx.html" class="active sidebar-link">小程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learn/js/wx.html#基础" class="sidebar-link">基础</a></li><li class="sidebar-sub-header"><a href="/learn/js/wx.html#app" class="sidebar-link">App</a></li><li class="sidebar-sub-header"><a href="/learn/js/wx.html#page" class="sidebar-link">Page</a></li><li class="sidebar-sub-header"><a href="/learn/js/wx.html#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/learn/js/wx.html#api" class="sidebar-link">API</a></li><li class="sidebar-sub-header"><a href="/learn/js/wx.html#事件" class="sidebar-link">事件</a></li><li class="sidebar-sub-header"><a href="/learn/js/wx.html#兼容" class="sidebar-link">兼容</a></li><li class="sidebar-sub-header"><a href="/learn/js/wx.html#使用" class="sidebar-link">使用</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="小程序"><a href="#小程序" aria-hidden="true" class="header-anchor">#</a> 小程序</h1> <h2 id="基础"><a href="#基础" aria-hidden="true" class="header-anchor">#</a> 基础</h2> <ul><li>import 不具有递归的特性</li> <li>include 将目标文件中&lt;template/&gt;和&lt;wxs/&gt;外的整个代码引入到当前位置</li> <li>js 脚本在 JsCore 中执行，每个页面在各自 WebView 线程进行渲染，切换页面时，运行上下文依旧在同一个 JsCore 线程中</li> <li>所有脚本都在同一个 JsCore 中执行，所以定时器需要切换页面时，需要提前清除</li></ul> <h2 id="app"><a href="#app" aria-hidden="true" class="header-anchor">#</a> App</h2> <ul><li>App()创建 App 实例，getApp()获取 App 实例</li> <li>onLaunch （全局只触发一次） / onShow / onHide / onError / 其余字段</li></ul> <h2 id="page"><a href="#page" aria-hidden="true" class="header-anchor">#</a> Page</h2> <ul><li>Page()创建页面实例</li> <li>data 属性是初始数据</li> <li>onLoad （未被销毁前只触发一次） / onReady （未被销毁前只触发一次） / onShow / onHide / onUnload 生命周期函数</li> <li>触发顺序 onLoad &gt; onShow &gt; onReady</li> <li>onReady 执行了表示逻辑层和视图层可以交互</li> <li>wx.navigateTo 切换页面或 tab 切换时，会触发 onHide</li> <li>wx.redirectTo 或 wx.navigateBack 回到其他页面，会触发 onUnload</li></ul> <h3 id="setdata"><a href="#setdata" aria-hidden="true" class="header-anchor">#</a> setData</h3> <ul><li>setData(data, callback)，data 是 key: value 形式的对象</li> <li>setData 需要两个线程的一些通讯消耗，为了提高性能，每次设置数据不超过 1024KB</li> <li>不要把 data 中任意一项的 value 设置为 undefined，可能会引起不可预料的 bug</li></ul> <h3 id="页面用户行为"><a href="#页面用户行为" aria-hidden="true" class="header-anchor">#</a> 页面用户行为</h3> <p><strong>onPullDownRefresh</strong>
监听用户下拉刷新事件，在 app.json 的 window 选项中或页面配置.json 中设置 enablePullDownRefresh 为 true 开启功能，刷新完后，wx.stopPullDownRefresh 可以停止当前页面的下拉刷新</p> <p><strong>onRearchBottom</strong>
监听用户上拉触底事件，在 app.json 的 window 选项中或页面配置.json 中设置触发距离 onReachBottomDistance，在触发距离期间，事件只会触发一次</p> <p><strong>onShareAppMessage</strong>
监听用户滑动页面事件，参数为 Object，包含 scrollTop 字段，表示垂直方向已滚动的距离（px）</p> <p><strong>onPageScroll</strong>
定义了该事件，右上角才显示转发按钮，点击转发按钮式会调用，此事件需要返回一个 Object，包含 title 和 path 两个字段，用于自定义转发内容</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">onShareAppMessage</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      title<span class="token punctuation">:</span> <span class="token string">&quot;自定义转发标题&quot;</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> <span class="token string">&quot;/page/user?id=123&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="页面跳转和路由"><a href="#页面跳转和路由" aria-hidden="true" class="header-anchor">#</a> 页面跳转和路由</h3> <p>页面栈最大数量为 10 个页面</p> <p>只能打开非 Tabbar 页面：<br> <strong>wx.navigateTo()</strong> 打开新页面，路由前 onHide，路由后 onLoad、onShow
<strong>wx.redirectTo()</strong> 页面重定向，路由前 onUpload，路由后 onLoad、onShow</p> <p>只能打开 Tabbar 页面：<br> <strong>wx.switchTab()</strong> Tab（除了声明了 Tabbar 页面）</p> <p><strong>wx.navigateBack()</strong> 页面返回，路由前 onUpload，路由后 onShow
<strong>wx.reLauch</strong> 重启动，路由前 onUpload，路由后 onLoad、onShow</p> <h2 id="组件"><a href="#组件" aria-hidden="true" class="header-anchor">#</a> 组件</h2> <p>组件名和属性都是小写，多个单词以&quot;-&quot;进行连接；<br>
组件公有属性：</p> <ul><li>id</li> <li>class</li> <li>hidden 是否可显示</li> <li>data-* 自定义属性</li> <li>bind/catch 事件</li></ul> <p>Image 图片组件属性：</p> <ul><li>src</li> <li>mode 图片裁剪、缩放的模式</li> <li>lazy-load 懒加载</li> <li>binderror 错误发生时触发事件</li> <li>bindload 加载完毕时触发事件</li></ul> <h2 id="api"><a href="#api" aria-hidden="true" class="header-anchor">#</a> API</h2> <p>wx.on<em>开头的 API 是监听某个事件发生的 API 事件，接受一个 callback 函数为参数；<br>
API 的 Object 参数一般由 success、fail、complete 三个回调接收接口调用结果；<br>
wx.get</em>开头的 API 是获取宿主环境数据的接口；<br>
wx.set*开头的 API 是写入数据到宿主环境的接口；</p> <h2 id="事件"><a href="#事件" aria-hidden="true" class="header-anchor">#</a> 事件</h2> <ul><li>touchstart</li> <li>touchmove</li> <li>touchcancel</li> <li>touchend</li> <li>tap</li> <li>longpress</li> <li>longtap</li> <li>transitionend</li> <li>animationstart</li> <li>animationiteration</li> <li>animationend</li></ul> <h3 id="事件绑定和捕获"><a href="#事件绑定和捕获" aria-hidden="true" class="header-anchor">#</a> 事件绑定和捕获</h3> <p>bind 不会阻止冒泡事件向上冒泡，bind: 以及 capture-bind:<br>
catch 可以阻止冒泡事件向上冒泡，catch: 以及 capture-catch:</p> <h2 id="兼容"><a href="#兼容" aria-hidden="true" class="header-anchor">#</a> 兼容</h2> <h2 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h2> <ul><li>placeholder-class 用于指定 placeholder 的相关样式</li> <li>button 的 formType=&quot;submit&quot; 和 form 的 bindSubmit=&quot;方法&quot;用于提交表单</li> <li>background 的 url 只能用 base64 或线上地址</li> <li></li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/10/2020, 11:15:34 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/learn/js/axios.html" class="prev">
          Axios
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.6de3ddb6.js" defer></script><script src="/assets/js/17.b63c5e09.js" defer></script>
  </body>
</html>

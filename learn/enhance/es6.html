<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES6 | Sth. I Like</title>
    <meta name="description" content="Sth. I Like">
    <link rel="icon" href="/logo.png">
    <meta name="keywords" content="js,es6">
    <link rel="preload" href="/assets/css/0.styles.07b453df.css" as="style"><link rel="preload" href="/assets/js/app.1d7e9e11.js" as="script"><link rel="preload" href="/assets/js/10.df41d32e.js" as="script"><link rel="prefetch" href="/assets/js/11.236302dd.js"><link rel="prefetch" href="/assets/js/12.09b498ea.js"><link rel="prefetch" href="/assets/js/13.2d3fabc2.js"><link rel="prefetch" href="/assets/js/14.79d01d8b.js"><link rel="prefetch" href="/assets/js/15.b9a02621.js"><link rel="prefetch" href="/assets/js/16.d0371621.js"><link rel="prefetch" href="/assets/js/17.b63c5e09.js"><link rel="prefetch" href="/assets/js/18.f7890618.js"><link rel="prefetch" href="/assets/js/19.d8181369.js"><link rel="prefetch" href="/assets/js/2.1ca6fe49.js"><link rel="prefetch" href="/assets/js/20.d9ca7871.js"><link rel="prefetch" href="/assets/js/21.08d5417f.js"><link rel="prefetch" href="/assets/js/22.b7d81f2e.js"><link rel="prefetch" href="/assets/js/23.865b0ffa.js"><link rel="prefetch" href="/assets/js/3.6df14d08.js"><link rel="prefetch" href="/assets/js/4.4fea53f6.js"><link rel="prefetch" href="/assets/js/5.cebd0a72.js"><link rel="prefetch" href="/assets/js/6.c7895668.js"><link rel="prefetch" href="/assets/js/7.dc4395cd.js"><link rel="prefetch" href="/assets/js/8.d909864b.js"><link rel="prefetch" href="/assets/js/9.1642cdcb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.07b453df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sth. I Like</span></a> <div class="links" style="max-width:nullpx;"><!----> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Learn</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/learn/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/learn/enhance/" class="nav-link router-link-active">Enhance</a></li><li class="dropdown-item"><!----> <a href="/learn/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/learn/tool/" class="nav-link">Tool</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Learn</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/learn/css/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/learn/enhance/" class="nav-link router-link-active">Enhance</a></li><li class="dropdown-item"><!----> <a href="/learn/js/" class="nav-link">JS</a></li><li class="dropdown-item"><!----> <a href="/learn/tool/" class="nav-link">Tool</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/learn/enhance/" class="sidebar-link">概述</a></li><li><a href="/learn/enhance/design.html" class="sidebar-link">设计模式</a></li><li><a href="/learn/enhance/es6.html" class="active sidebar-link">ES6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#es6" class="sidebar-link">ES6</a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#块作用域" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#变量解构" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#运算符-扩展" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#string-扩展" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#正则表达式" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#number-扩展" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#math" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#function-扩展" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#array-扩展" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#object-扩展" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#symbol" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#set-和-map-结构" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#iterator-和-for-of-循环" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#generator" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#async" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#class" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/learn/enhance/es6.html#模块" class="sidebar-link"></a></li></ul></li><li><a href="/learn/enhance/structure.html" class="sidebar-link">数据结构</a></li><li><a href="/learn/enhance/typescript.html" class="sidebar-link">TS</a></li></ul> </div> <div class="page"> <div class="content"><h2 id="es6"><a href="#es6" aria-hidden="true" class="header-anchor">#</a> ES6</h2> <ul><li><a href="#blockscope">块作用域</a></li> <li><a href="#vardeconst">变量解构</a></li> <li><a href="#operator">运算符 扩展</a></li> <li><a href="#string">String 扩展</a></li> <li><a href="#regexp">正则表达式</a></li> <li><a href="#number">Number 扩展</a></li> <li><a href="#function">Function 扩展</a></li> <li><a href="#array">Array 扩展</a></li> <li><a href="#object">Object 扩展</a></li> <li><a href="#symbol">Symbol</a></li> <li><a href="#set-map">Set 和 Map 结构</a></li> <li><a href="#iterator">Iterator 和 for...of 循环</a></li> <li><a href="#generator">Generator</a></li> <li><a href="#async">Async</a></li> <li><a href="#class">Class</a></li> <li><a href="#module">模块</a></li></ul> <h2 id="块作用域"><a href="#块作用域" aria-hidden="true" class="header-anchor">#</a> <span id="blockscope" style="color: #000">块作用域</span></h2> <hr> <ul><li>不存在变量提升情况，变量未声明前不能使用</li> <li>同一作用域中不能重复声明变量</li> <li>作用域中的函数声明，会被提升到全局作用域或函数作用域以及当前块级作用域顶部，可以使用函数表达式替换该方式</li> <li>替换匿名立即执行函数</li></ul> <p>const 声明的变量必须初始化，针对复合类型的数据，数据结构可变不能够控制的；<br>
var/function 声明的全局变量是顶处对象的属性，let/const/class 声明的全局变量不是顶处对象的属性；<br>
globalThis 指向全局对象 window。</p> <h2 id="变量解构"><a href="#变量解构" aria-hidden="true" class="header-anchor">#</a> <span id="vardeconst" style="color: #000">变量解构</span></h2> <hr> <p>解构失败时，变量的值为 undefined；<br>
数组解构，当数组成员严格等于 undefined 时，才会使用默认值；<br>
对象解构，当对象属性值严格等于 undefined 时，才会使用默认值。找到同名属性，然后赋值给对应变量。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> color<span class="token punctuation">,</span> opacity<span class="token punctuation">:</span> opacity <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">,</span> opacity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> opacity <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">,</span> opacity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="解构赋值"><a href="#解构赋值" aria-hidden="true" class="header-anchor">#</a> 解构赋值</h3> <p>针对函数参数、数组、对象，...变量名必须是最后一个参数</p> <h2 id="运算符-扩展"><a href="#运算符-扩展" aria-hidden="true" class="header-anchor">#</a> <span id="operator" style="color: #000">运算符 扩展</span></h2> <p><code>?.</code> 链判断运算符?.有三种写法。</p> <ul><li>obj?.prop // 对象属性是否存在</li> <li>obj?.[expr] // 同上</li> <li>func?.(...args) // 函数或对象方法是否存在</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
a<span class="token operator">?</span><span class="token punctuation">.</span>b<span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>||=</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

x <span class="token operator">||</span><span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// x || ( x= y)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>&amp;&amp;=</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

x <span class="token operator">&amp;&amp;</span><span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// x &amp;&amp; (x = y)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>??=</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

x <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// x ?? (x = y)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="string-扩展"><a href="#string-扩展" aria-hidden="true" class="header-anchor">#</a> <span id="string" style="color: #000">String 扩展</span></h2> <hr> <h3 id="方法"><a href="#方法" aria-hidden="true" class="header-anchor">#</a> 方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 返回码点大于0xFFFF的字符</span>
String<span class="token punctuation">.</span><span class="token function">fromChatCode</span><span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回一个斜杠都被转义的字符串，用于模板字符串的处理方法</span>
String<span class="token punctuation">.</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="实例方法"><a href="#实例方法" aria-hidden="true" class="header-anchor">#</a> 实例方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 是否包含对应的字符串，返回布尔值</span>
str<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> start<span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> start<span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
str<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> start<span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回重复n次的原字符串</span>
<span class="token comment">// n为正数时，对n向下取整；</span>
<span class="token comment">// n为0~-1之间时，视为0；</span>
<span class="token comment">// n为负数或Infinity时，会报错；</span>
<span class="token comment">// 非数值会转化为数值。</span>
str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 最大长度 和 用于补全的字符串（第二个参数缺省用空格补全）</span>
str<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span>len<span class="token punctuation">,</span> s<span class="token operator">?</span><span class="token punctuation">)</span>   <span class="token comment">// 头部补全</span>
str<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span>len<span class="token punctuation">,</span> s<span class="token operator">?</span><span class="token punctuation">)</span>     <span class="token comment">// 尾部补全</span>

<span class="token comment">// 返回新字符串</span>
str<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 去掉头部空格</span>
str<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 去掉尾部空格</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="正则表达式"><a href="#正则表达式" aria-hidden="true" class="header-anchor">#</a> <span id="regexp" style="color: #000">正则表达式</span></h2> <hr> <p>返回正则的正文：RegExp.prototype.source<br>
返回正则的修饰符：RegExp.prototype.flags</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ES5</span>
<span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex">/color/i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ES6，第二个参数为指定修饰符，会覆盖正则默认的修饰符</span>
<span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex">/color/gi</span><span class="token punctuation">,</span> <span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="u-修饰符"><a href="#u-修饰符" aria-hidden="true" class="header-anchor">#</a> u 修饰符</h3> <p>处理大于\uFFFF 的 Unicode 字符，正确处理四个字节的 UTF-16 字符</p> <ul><li>针对大于码点大于 0xFFFF 的 Unicode 字符</li> <li>Unicode 字符表示法</li> <li>识别大括号中的字符，为非量词</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/^\uD83D/u</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\uD83D\uDC3c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">.</span>$<span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\uD83D\uDC3c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">/</span>\u<span class="token punctuation">{</span><span class="token number">61</span><span class="token punctuation">}</span><span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">/</span>𠮷<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;𠮷𠮷&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">/</span><span class="token operator">^</span>\<span class="token constant">S</span>$<span class="token operator">/</span>u<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;𠮷&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token operator">/</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token operator">/</span>iu<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;\u212A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>RegExp.prototype.unicode 返回是否设置了 u 修饰符</p> <h3 id="y-修饰符"><a href="#y-修饰符" aria-hidden="true" class="header-anchor">#</a> y 修饰符</h3> <p>y 修饰符是全局匹配，后一次匹配从上一次匹配成功的下一个位置开始，不同于 g 修饰符只要剩下位置存在匹配即可，必须从剩余第一个位置开始；<br>
RegExp.prototype.sticky 返回是否设置了 y 修饰符。</p> <h3 id="s-修饰符"><a href="#s-修饰符" aria-hidden="true" class="header-anchor">#</a> s 修饰符</h3> <p>.代表任意单个字符，有两个例外：</p> <ul><li>针对四个字节的 UTF-16 字符，可以使用 u 修饰符</li> <li>行终止符：\u000A 换行符\n，\u000D 回车符\r，\u2028 行分隔符，\u2029 段分隔符</li></ul> <p>通过 s 修饰符可以匹配任意单个字符，即是 dotAll 模式；<br>
RexExp.prototype.dotAll 返回是否在 dotAll 模式。</p> <h3 id="断言"><a href="#断言" aria-hidden="true" class="header-anchor">#</a> 断言</h3> <p>先行断言 ?=</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 匹配紧接着后面是y的x，(?=y)不计入结果</span>
<span class="token regex">/x(?=y)/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>先行否定断言 ?!</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 匹配紧接着后面不是y的x，(?!y)不计入结果</span>
<span class="token regex">/x(?!y)/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>后行断言 ?&lt;=</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 匹配紧接着前面是y的x，(?&lt;=y)不计入结果</span>
<span class="token regex">/(?&lt;=y)x/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>后行否定断言 ?!&lt;</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 匹配紧接着前面不是y的x，(?&lt;!y)不计入结果</span>
<span class="token regex">/(?&lt;!y)x/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>后行断言执行顺序是从右到左的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 无后行断言时，第一个括号是贪婪模式，第二个括号只能捕获一个字符</span>
<span class="token operator">/</span><span class="token punctuation">(</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">(</span>\d<span class="token operator">+</span><span class="token punctuation">)</span>$<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;2019&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;2019&quot;, &quot;201&quot;, &quot;9&quot;]</span>
<span class="token comment">// 后行断言时，第二个括号是贪婪模式，第一个括号只能捕获一个字符</span>
<span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">(</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">)</span>$<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;2019&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;&quot;, &quot;2&quot;, &quot;019&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>针对反斜杠引用（例如\1）也需要放在前面</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/(?&lt;=\1i(n))e/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;nine&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="unicode-属性类"><a href="#unicode-属性类" aria-hidden="true" class="header-anchor">#</a> Unicode 属性类</h3> <p>\p 和 \P，只针对 Unicode 字符，需要加上 u 修饰符，匹配符合 Unicode 某种属性的所有字符<br>
\P 是\p 的反向匹配，即不满足条件的字符</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>\p<span class="token punctuation">{</span>UnicodePropertyName<span class="token operator">=</span>UnicodePropertyValue<span class="token punctuation">}</span>
\p<span class="token punctuation">{</span>UnicodePropertyName<span class="token punctuation">}</span>
\p<span class="token punctuation">{</span>UnicodePropertyValue<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="具名组匹配"><a href="#具名组匹配" aria-hidden="true" class="header-anchor">#</a> 具名组匹配</h3> <p>具名组匹配允许为每一个组匹配指定一个名字，便于阅读以及引用，在圆括号内部，模式的头部添加 问号 + 尖括号 + 组名<br>
通过返回结果的 groups 属性上引用该组名，同时数字序号依然有效。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/(?&lt;year&gt;\d{4}-(?&lt;month&gt;\d{2})-(?&lt;day&gt;\d{2}))/</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&quot;1989-12-13&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
result<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>year<span class="token punctuation">;</span> <span class="token comment">// 1989</span>
result<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>month<span class="token punctuation">;</span> <span class="token comment">// 12</span>
result<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>day<span class="token punctuation">;</span> <span class="token comment">// 13</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>具名组匹配的引用：\k&lt;组名&gt; 等效于 数字引用，例如\1</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/(?&lt;digital&gt;\d+)\w+\k&lt;digital&gt;/</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&quot;1989ts1989&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="string-prototype-matchall"><a href="#string-prototype-matchall" aria-hidden="true" class="header-anchor">#</a> String.prototype.matchAll</h3> <p>返回正则在字符串中的多个匹配，是一个遍历器对象，可以用 for...of 循环取出，针对大数组，可以节省资源。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/\d+[a-zA-Z]+/g</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&quot;1989ts1989jm1989es1989jt&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> result <span class="token keyword">of</span> s<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>遍历器对象转化为数组的两种方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token operator">...</span>s<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="number-扩展"><a href="#number-扩展" aria-hidden="true" class="header-anchor">#</a> <span id="number" style="color: #000">Number 扩展</span></h2> <hr> <h3 id="二进制和八进制"><a href="#二进制和八进制" aria-hidden="true" class="header-anchor">#</a> 二进制和八进制</h3> <p>0b|0B、0o|0O</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">0b1110</span> <span class="token operator">===</span> <span class="token number">14</span><span class="token punctuation">;</span>
<span class="token number">0o16</span> <span class="token operator">===</span> <span class="token number">14</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="常量"><a href="#常量" aria-hidden="true" class="header-anchor">#</a> 常量</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 转化为十进制数</span>
<span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 两个数之间的最小间隔</span>
Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span><span class="token punctuation">;</span> <span class="token comment">// 2.220446049250313e-16</span>
<span class="token comment">// 最大安全整数</span>
Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">;</span> <span class="token comment">// Math.pow(2, 53) - 1;</span>
<span class="token comment">// 最小安全整数</span>
Number<span class="token punctuation">.</span><span class="token constant">MIN_SAFE_INTEGER</span><span class="token punctuation">;</span> <span class="token comment">// -Math.pow(2, 53) + 1;</span>
<span class="token comment">// 最大正数</span>
Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">-</span> <span class="token comment">// 1.7976931348623157e+308</span>
  <span class="token comment">// 最小负数</span>
  Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">;</span> <span class="token comment">// -1.7976931348623157e+308</span>
<span class="token comment">// 最小正数</span>
Number<span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span> <span class="token operator">-</span> <span class="token comment">// 5e-324</span>
  <span class="token comment">// 最大负数</span>
  Number<span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">;</span> <span class="token comment">// -5e-324</span>
<span class="token comment">// 非数字</span>
Number<span class="token punctuation">.</span><span class="token number">NaN</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
<span class="token comment">// 正无穷大，溢出时返回该值</span>
Number<span class="token punctuation">.</span><span class="token constant">POSITIVE_INFINITY</span><span class="token punctuation">;</span> <span class="token comment">// Infinity</span>
<span class="token comment">// 负无穷大，溢出时返回该值</span>
Number<span class="token punctuation">.</span><span class="token constant">NEGATIVE_INFINITY</span><span class="token punctuation">;</span> <span class="token comment">// -Infinity</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="方法-2"><a href="#方法-2" aria-hidden="true" class="header-anchor">#</a> 方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 转化为十进制数</span>
<span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 数值是否为NaN，不是NaN返回false</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 数值是否为有限数，不是数值返回false</span>
Number<span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 数值是否为整数，不是数值返回false</span>
Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 是否为安全整数</span>
Number<span class="token punctuation">.</span><span class="token function">isSafeInteger</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 转化为浮点数</span>
Number<span class="token punctuation">.</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 转化为整数</span>
Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> radix<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="实例方法-2"><a href="#实例方法-2" aria-hidden="true" class="header-anchor">#</a> 实例方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 返回一个指定位数（[0, 100]，非必填）的指数形式数字</span>
<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toExponential</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toExponential</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.23456e+5</span>

<span class="token comment">// 返回一个指定位数（[0, 100]，非必填）的定点形式数字</span>
<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;123456.0000000&quot;</span>

<span class="token comment">// 返回一个指定位数（[1, 100]）的定点形式或指数形式数字</span>
<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123456.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="指数运算符"><a href="#指数运算符" aria-hidden="true" class="header-anchor">#</a> 指数运算符</h3> <p>** 是右结合方式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">2</span> <span class="token operator">**</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">**</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">**</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3.402823669209385e+38</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
a <span class="token operator">**=</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">// 3.402823669209385e+38</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="math"><a href="#math" aria-hidden="true" class="header-anchor">#</a> <span id="math" style="color: #000">Math</span></h2> <hr> <p>非数值内部先转化为数值，无法转为数值的返回 NaN</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 返回整数部分，非数值内部先转化为数值</span>
Math<span class="token punctuation">.</span><span class="token function">trunc</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>

<span class="token comment">// 判断数值是正数、负数、零，返回对应值+1，-1，0|-0</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>

<span class="token comment">// 立方根</span>
Math<span class="token punctuation">.</span><span class="token function">cbrt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>

<span class="token comment">// 所有参数的平方和的平方根</span>
Math<span class="token punctuation">.</span><span class="token function">hypot</span><span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> value3<span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="function-扩展"><a href="#function-扩展" aria-hidden="true" class="header-anchor">#</a> <span id="function" style="color: #000">Function 扩展</span></h2> <hr> <p>函数参数：函数声明时，参数会形成单独一个作用域<br>
length：返回指定默认参数之前的参数个数，也不包括 reset 参数<br>
name：</p> <ul><li>一个变量为匿名函数，name 值为变量名</li> <li>一个变量为具名函数，name 值为具名函数值</li> <li>构造函数返回的函数实例，name 值为 anonymous</li> <li>bind 返回的函数，name 值会加上'bound '前缀</li></ul> <h3 id="箭头函数"><a href="#箭头函数" aria-hidden="true" class="header-anchor">#</a> 箭头函数</h3> <ul><li>不需要参数或需要多个参数，使用圆括号代表参数</li> <li>代码块多于一条语句，使用大括号括起来，并使用 return 语句</li> <li>直接返回一个对象时，需在对象外面加上括号</li> <li>函数内部的 this 指向定义时所在的对象</li> <li>没有自身的 this，不能使用 call/apply/bind 方法改变 this 指向</li></ul> <p>不适用场景：</p> <ul><li>定义对象的方法，且方法内部包括 this</li> <li>需要动态 this 的时候</li></ul> <h3 id="尾调用优化"><a href="#尾调用优化" aria-hidden="true" class="header-anchor">#</a> 尾调用优化</h3> <p>函数的最后一步是调用另一个函数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">getStyle</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">,</span> opacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token function">transformColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> rgba <span class="token operator">=</span> color <span class="token operator">+</span> opacity<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">getColor</span><span class="token punctuation">(</span>rgba<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="其他"><a href="#其他" aria-hidden="true" class="header-anchor">#</a> 其他</h3> <p>函数参数的尾逗号：允许函数声明和调用时，最后可以加上一个逗号。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">getColor</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">,</span> opacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">getColor</span><span class="token punctuation">(</span><span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>catch 命令省略参数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="array-扩展"><a href="#array-扩展" aria-hidden="true" class="header-anchor">#</a> <span id="array" style="color: #000">Array 扩展</span></h2> <hr> <h3 id="解构赋值-2"><a href="#解构赋值-2" aria-hidden="true" class="header-anchor">#</a> 解构赋值</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token operator">...</span>extra<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
extra<span class="token punctuation">;</span> <span class="token comment">// [7, 14, 16]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="扩展运算符"><a href="#扩展运算符" aria-hidden="true" class="header-anchor">#</a> 扩展运算符</h3> <p>扩展运算符...是 rest 参数的逆运算，将数组转为逗号分隔的参数序列。</p> <h3 id="扩展运算符应用"><a href="#扩展运算符应用" aria-hidden="true" class="header-anchor">#</a> 扩展运算符应用</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 复制数组，克隆</span>
<span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>a1<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 写法一</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span><span class="token operator">...</span>a3<span class="token punctuation">]</span> <span class="token operator">=</span> a1<span class="token punctuation">;</span> <span class="token comment">// 写法二</span>

<span class="token comment">// 合并数组，浅拷贝</span>
<span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a3 <span class="token operator">=</span> a1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a4 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>a1<span class="token punctuation">,</span> <span class="token operator">...</span>a2<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// a3和a4的成员都是对原数组成员的引用，都是浅拷贝，修改后原数组后，会同步到新数组</span>

<span class="token comment">// 将字符串转为数组，正确识别Unicode字符</span>
<span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">...</span>s1<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// ['o', 'r', 'a', 'n', 'g', 'e'];</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token string">&quot;6\uD83D\uDC3c&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">...</span>s2<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>将空位转化为 undefined</p> <h3 id="方法-3"><a href="#方法-3" aria-hidden="true" class="header-anchor">#</a> 方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 从类数组对象或遍历器对象中创建一个新的数组实例</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span> length<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [6, 7]</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [36, 49, 196, 256]</span>

<span class="token comment">// 用一组参数来创建新的数组实例</span>
Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [6, 7, 14, 16]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="实例方法-3"><a href="#实例方法-3" aria-hidden="true" class="header-anchor">#</a> 实例方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 浅复制数组的一部分到同一数组的另一个位置，不改变原数组长度</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> start<span class="token operator">?</span><span class="token punctuation">,</span> end<span class="token operator">?</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// [2, 2, 4, 9, 16]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// [1, 4, 5, 4, 5]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [1, 4, 3, 4, 5]</span>

<span class="token comment">// 用固定值填充数组中从起始索引到终止索引内的所有元素</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> start<span class="token operator">?</span><span class="token punctuation">,</span> end<span class="token operator">?</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [6, 6, 6, 6, 6]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [1, 2, 3, 6, 6]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [1, 2, 3, 6, 5]</span>

<span class="token comment">// 判断数组是否包含一个指定值，从指定位置开始查找</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> start<span class="token operator">?</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token comment">// 查找满足函数的第一个元素，否则返回undefined</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> element <span class="token operator">&gt;</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 16</span>

<span class="token comment">// 查找满足函数的第一个元素的索引，否则返回-1</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> element <span class="token operator">&gt;</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 3</span>

<span class="token comment">// 返回新的遍历器对象，包含每一个索引的值</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> a1<span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token comment">// 返回新的遍历器对象，包含每一个索引键</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">of</span> a1<span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token comment">// 返回新的遍历器对象，包含每个索引的键值对</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>k<span class="token punctuation">,</span> v<span class="token punctuation">]</span> <span class="token keyword">of</span> a1<span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

<span class="token comment">// 根据指定深度递归遍历数组，返回新数组。可以移除空项</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span>depth<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [1, 2, 3, [4, 5]]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [1, 2, 3, 4, 5]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [1, 2, 3, [4, 5]]</span>

<span class="token comment">// 用映射函数映射每个元素，压缩成一个新数组。与map()和flat(1)几乎相同</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// [1, 2, 3, [4, 5]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h2 id="object-扩展"><a href="#object-扩展" aria-hidden="true" class="header-anchor">#</a> <span id="object" style="color: #000">Object 扩展</span></h2> <hr> <h3 id="解构赋值-3"><a href="#解构赋值-3" aria-hidden="true" class="header-anchor">#</a> 解构赋值</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> background<span class="token punctuation">,</span> <span class="token operator">...</span>style <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  color<span class="token punctuation">:</span> <span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">,</span>
  opacity<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  background<span class="token punctuation">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// {color: &quot;#ffa500&quot;, opacity: 1}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="扩展运算符-2"><a href="#扩展运算符-2" aria-hidden="true" class="header-anchor">#</a> 扩展运算符</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> Color <span class="token operator">=</span> <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">,</span> opacity<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newColor <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>Color<span class="token punctuation">,</span> background<span class="token punctuation">:</span> <span class="token string">&quot;#fff&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// {color: &quot;#ffa500&quot;, opacity: 1, background: &quot;#fff&quot;}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="属性简洁表示法"><a href="#属性简洁表示法" aria-hidden="true" class="header-anchor">#</a> 属性简洁表示法</h3> <p>允许在大括号里面直接写入变量和函数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> style <span class="token operator">=</span> <span class="token punctuation">{</span> color <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// {color: '#ffa500'}</span>

<span class="token keyword">function</span> <span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">,</span> opacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> opacity <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// {color: color, opacity: opacity}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> Color <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="属性名表达式"><a href="#属性名表达式" aria-hidden="true" class="header-anchor">#</a> 属性名表达式</h3> <ul><li>标识符作为属性名</li> <li>表达式作为属性名，表达式放在方括号内</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> getOpacity <span class="token operator">=</span> <span class="token string">&quot;getOpacity&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> Color <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;getColor&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>getOpacity<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>属性简洁表示法和属性名表达式不能同时使用；属性名表达式是一个对象，会被转化为字符串[object Object]。</p> <h3 id="方法的-name"><a href="#方法的-name" aria-hidden="true" class="header-anchor">#</a> 方法的 name</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> getOpacity <span class="token operator">=</span> <span class="token string">&quot;getOpacity&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> Color <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&quot;getColor&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>getOpacity<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Color<span class="token punctuation">.</span>getColor<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// &quot;getColor&quot;</span>

<span class="token comment">// 对象的取值函数getter和存值函数setter的name属性是在描述对象的get和set上</span>
<span class="token keyword">let</span> Color <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> des <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>Color<span class="token punctuation">,</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
des<span class="token punctuation">.</span>get<span class="token punctuation">.</span>color<span class="token punctuation">;</span> <span class="token comment">// 'get color'</span>
des<span class="token punctuation">.</span>set<span class="token punctuation">.</span>color<span class="token punctuation">;</span> <span class="token comment">// 'set color'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="可枚举"><a href="#可枚举" aria-hidden="true" class="header-anchor">#</a> 可枚举</h3> <ul><li>for...in 遍历自身和继承可枚举的属性</li> <li>Object.keys() 返回自身可枚举的属性键名</li> <li>JSON.stringify() 串行化自身可枚举的属性</li> <li>Object.assign() 只拷贝自身可枚举属性</li></ul> <h3 id="方法-4"><a href="#方法-4" aria-hidden="true" class="header-anchor">#</a> 方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在===基础上，正确识别 0不等于-0 以及 NaN等于自身</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">)</span>

<span class="token comment">// 浅拷贝，合并所有对象自身可枚举属性到目标对象上，后面属性覆盖前面同名属性</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source1<span class="token punctuation">,</span> source2<span class="token operator">...</span><span class="token punctuation">)</span>

<span class="token comment">// 返回对象所有自身描述对象</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

<span class="token comment">// 设置原型对象</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prototype<span class="token punctuation">)</span>

<span class="token comment">// 获取原型对象</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回包含自身所有可遍历属性键名的数组</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回包含自身所有可遍历属性键值的数组</span>
Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回包含自身所有可遍历属性键值对数组的数组</span>
Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> Color <span class="token operator">=</span> <span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'#ffa500'</span><span class="token punctuation">,</span> opacity<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>Color<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [[&quot;color&quot;, &quot;#ffa500&quot;], [&quot;opacity&quot;, 1]]</span>

<span class="token comment">// entries逆操作，将键值对数组转化为对象</span>
Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>arrayObj<span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;opacity&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {color: &quot;#ffa500&quot;, opacity: 1}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="symbol"><a href="#symbol" aria-hidden="true" class="header-anchor">#</a> <span id="symbol" style="color: #000">Symbol</span></h2> <hr> <h3 id="symbol-description"><a href="#symbol-description" aria-hidden="true" class="header-anchor">#</a> Symbol(description)</h3> <p>返回的 symbol 值都是唯一的，作为对象属性的标识符，保证属性名的唯一，它是一种类似于字符串的类型。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> color1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> color2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
color1 <span class="token operator">===</span> color2<span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token comment">// 作为属性名，需要放在方括号内</span>
<span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>color<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 判断类型</span>
<span class="token keyword">let</span> attr <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
attr<span class="token punctuation">.</span>description<span class="token punctuation">;</span>
<span class="token keyword">typeof</span> attr <span class="token operator">===</span> <span class="token string">&quot;symbol&quot;</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="symbol-prototype-description"><a href="#symbol-prototype-description" aria-hidden="true" class="header-anchor">#</a> Symbol.prototype.description</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 没有描述</span>
<span class="token keyword">let</span> att1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
att<span class="token punctuation">.</span>description<span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token comment">// 有描述</span>
<span class="token keyword">let</span> att1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
att1<span class="token punctuation">.</span>description<span class="token punctuation">;</span> <span class="token comment">// 'color'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="正则表达式-2"><a href="#正则表达式-2" aria-hidden="true" class="header-anchor">#</a> 正则表达式</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>symbol<span class="token punctuation">.</span>match<span class="token punctuation">;</span> <span class="token comment">// string.prototype.match 被调用</span>
symbol<span class="token punctuation">.</span>replace<span class="token punctuation">;</span> <span class="token comment">// string.prototype.replace 被调用</span>
symbol<span class="token punctuation">.</span>search<span class="token punctuation">;</span> <span class="token comment">// string.prototype.search 被调用</span>
symbol<span class="token punctuation">.</span>split<span class="token punctuation">;</span> <span class="token comment">// string.prototype.split 被调用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>可以用于消除强耦合的具体字符串或数字，替换对应值。</p> <h2 id="set-和-map-结构"><a href="#set-和-map-结构" aria-hidden="true" class="header-anchor">#</a> <span id="set-map" style="color: #000">Set 和 Map 结构</span></h2> <hr> <p>Set|WeakSet|Map|WeakSet 的属性 size 值为 0；<br>
遍历器对象的 next().value 来获取对应的值。</p> <h3 id="set"><a href="#set" aria-hidden="true" class="header-anchor">#</a> Set</h3> <p>new Set(iterable) 类似于数组，但成员是唯一的，参数接收具有 iterable 接口的结构，可以用于去重，NaN 之间是相同值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set(3) {1, 2, 3}</span>
<span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set(5) {&quot;#&quot;, &quot;f&quot;, &quot;a&quot;, &quot;5&quot;, &quot;0&quot;}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>实例属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 返回值的个数</span>
<span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>实例方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 添加元素，返回该Set对象</span>
<span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除元素，返回布尔值</span>
<span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查找元素，返回布尔值</span>
<span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清除元素</span>
<span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 由于没有键，所以values()|keys()返回的是相同的值</span>
<span class="token comment">// 返回包含所有值的遍历器对象</span>
<span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回包含所有值的遍历器对象</span>
<span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回包含所有值的遍历器对象</span>
<span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 遍历</span>
<span class="token class-name">Set</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>扩展运算符</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">...</span>set<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="weakset"><a href="#weakset" aria-hidden="true" class="header-anchor">#</a> WeakSet</h3> <p>只能存放对象引用，存储的的对象是被弱引用，一旦不引用会被回收</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 添加元素，返回该WeakSet对象</span>
<span class="token class-name">WeakSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除元素，返回布尔值</span>
<span class="token class-name">WeakSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查找元素，返回布尔值</span>
<span class="token class-name">WeakSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清除元素</span>
<span class="token class-name">WeakSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="map"><a href="#map" aria-hidden="true" class="header-anchor">#</a> Map</h3> <p>new Map(iterable)</p> <ul><li>类似于 Object，但键值可以是任意值</li> <li>遍历时按照插入顺序返回键值</li> <li>可直接遍历</li> <li>在频繁增删键值有性能优势</li></ul> <p>实例属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 键值对数量</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size<span class="token punctuation">;</span>

<span class="token comment">// 设置键值对</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取值</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除key，返回布尔值</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查找key，返回布尔值</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清除所有键值对</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 遍历</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回包含所有值的遍历器对象</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回包含所有键的遍历器对象</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回包含所有[key, value]的遍历器对象</span>
<span class="token class-name">Map</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="weakmap"><a href="#weakmap" aria-hidden="true" class="header-anchor">#</a> WeakMap</h3> <p>只接受对象作为键名，键名所引用的对象是被弱引用，一旦不引用会被回收。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 添加元素，返回该WeakMap对象</span>
<span class="token class-name">WeakMap</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除元素，返回布尔值</span>
<span class="token class-name">WeakMap</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查找元素，返回布尔值</span>
<span class="token class-name">WeakMap</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清除元素</span>
<span class="token class-name">WeakMap</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="iterator-和-for-of-循环"><a href="#iterator-和-for-of-循环" aria-hidden="true" class="header-anchor">#</a> <span id="iterator" style="color: #000">Iterator 和 for...of 循环</span></h2> <hr> <p>作用：</p> <ul><li>为各种数据结构提供统一简便的访问接口</li> <li>使数据结构的成员按照某种次序排列</li> <li>接口供 for...of 循环消费</li></ul> <p>创建一个指针对象，指向当前数据结构的起始位置，调用其 next()来指向对应的成员直到结束位置。next()方法返回一个对象，具有 value 和 done 两个属性，value 为 undefined 和 done 为 true 是遍历到结束位置的标志。</p> <p>原生具备 Iterator 接口的数据结构，部署了 Symbol.iterator 属性，for...of 和 while 均可用于遍历：<br>
Array、Map、Set、String、TypedArray、函数的 arguments 对象、NodeList 对象。</p> <p>数组、Map、Set 通过 entries()、keys()、values()均返回一个遍历器对象。</p> <p>使用场合：</p> <ul><li>解构赋值</li> <li>扩展运算符</li> <li>yield*</li> <li>其他场合</li></ul> <h2 id="generator"><a href="#generator" aria-hidden="true" class="header-anchor">#</a> <span id="generator" style="color: #000">Generator</span></h2> <hr> <p>Generator 函数是状态机，调用后并不会立即执行，而返回一个遍历器对象，可依次遍历内部的每个状态，通过调用遍历器对象的 next 方法，使得指针移向下一个状态。<br>
特征：</p> <ul><li>funciton 关键字与函数名间有一个星号</li> <li>函数体内部使用 yield 表达式</li> <li>yield 暂停执行</li> <li>next 恢复执行</li></ul> <p><strong>yield</strong><br>
遇到 yield 表达式，暂停执行后面的操作，并将 yield 后面表达式的值作为返回对象的 value 属性值。</p> <p><strong>next 方法</strong></p> <ul><li>调用 next 方法会返回一个包含 value 和 done 属性的对象；</li> <li>yield 表达式：在另一个表达式中使用需要放在圆括号中，作为函数参数或复制表达式右边，可以不加括号；</li> <li>yield 表达式本身返回 undefined，next 方法可以带一个参数，该参数会作为上一个 yield 表达式的返回值。</li></ul> <p><strong>Generator.prototype.throw()</strong></p> <ul><li>可以接受一个参数被 catch 语句接收，建议是 Error 对象实例；</li> <li>在函数体外抛出错误，在 Generator 函数体内用 catch 语句捕获，前提是至少执行一次 next 方法；</li> <li>多个 yield 表达式，可以用一个 try...catch 在函数内来捕获错误；</li> <li>在 Generator 执行过程中抛出错误，且没有被内部捕获，就不会再执行下去了，之后调用 next 方法，会返回对象的 value 为 undefined、done 为 true，JS 引擎会认为 Generator 已经结束。</li></ul> <p><strong>Generator.prototype.return</strong></p> <ul><li>返回给定的值，终结遍历 Generator 函数，返回对象的 value 为 return 方法的参数，done 为 true。</li> <li>return 不提供参数时，返回对象的 value 为 undefined</li> <li>如果函数内部有 try...finally 代码块，且执行到 try 代码块，return 会导致立刻进入 finally 代码块，执行完后整个函数才结束</li></ul> <p>next()将 yield 表达式替换成一个值<br>
throw()将 yield 表达式替换成一个 throw 语句<br>
return()将 yield 表达式替换成一个 return 语句</p> <p><strong>yield*表达式</strong><br>
Generator 函数内部调用另一个 Generator 函数需要在前者函数体内手动完成遍历，通过 yield*可以解决嵌套问题，它返回的是一个遍历器对象。</p> <p>作为对象属性的 Generator 函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getColor</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">*</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="async"><a href="#async" aria-hidden="true" class="header-anchor">#</a> <span id="async" style="color: #000">Async</span></h2> <hr> <p>Generator 语法糖，体现四点改进：</p> <ul><li>内置执行器</li> <li>更好的语义</li> <li>更广的适用性</li> <li>返回值是 Promise</li></ul> <p>async 函数返回一个 Promise 对象，函数内部的 return 语句返回的值，作为 then 方法回调函数的参数，内部抛出的错误导致返回的 Promise 对象的状态为 reject 状态，抛出的错误对象作为 catch 方法回调函数的参数。</p> <h3 id="await"><a href="#await" aria-hidden="true" class="header-anchor">#</a> await</h3> <p>正常情况下 await 返回一个 Promise 对象，否则直接返回该值；<br>
await 后面的异步操作出错，等同于 async 函数返回的 Promise 对象变为 reject 状态；<br>
任何一个 await 语句后面的 Promise 对象变为 reject 状态，整个 async 函数都会中断执行；<br>
将 await 代码放在 try...catch 代码块中，防止出现 reject 状态时，中断了执行。</p> <h2 id="class"><a href="#class" aria-hidden="true" class="header-anchor">#</a> <span id="class" style="color: #000">Class</span></h2> <hr> <p>类必须用的 new 来创建实例；<br>
类的方法声明时不需要加 function；<br>
类实例的 constructor 方法指向类原型的 constructor 方法；<br>
类不存在变量提升；<br>
类有 name 属性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Color.prototype.getColor指向Color类的getColor方法</span>
<span class="token keyword">class</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>
  <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>color<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token class-name">Color</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token operator">===</span> Color<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>类的内部定义的方法是不可枚举的；<br>
constructor 方法没有显示定义，会默认添加一个空的 constructor 方法；<br>
constructor 方法默认返回实例对象，也可以指定返回一个对象。</p> <h3 id="set-get-关键字"><a href="#set-get-关键字" aria-hidden="true" class="header-anchor">#</a> set/get 关键字</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>opacity <span class="token operator">=</span> o<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">op</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>opacity<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">op</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>opacity <span class="token operator">=</span> v<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
color<span class="token punctuation">.</span>op <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span>op<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="实例属性"><a href="#实例属性" aria-hidden="true" class="header-anchor">#</a> 实例属性</h3> <p>除了 constructor 里面声明属性外，可以在类里面直接定义属性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>
  opacity <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  shadow<span class="token punctuation">;</span>
  <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">op</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>opacity<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">op</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>opacity <span class="token operator">=</span> v<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="static"><a href="#static" aria-hidden="true" class="header-anchor">#</a> static</h3> <p>类的方法名前加上 static 就变成静态方法，静态方法只能通过类来调用，静态方法可以被继承，静态方法内部的 this 指向该类，静态方法可以和非静态方法重名；<br>
类的属性同上。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> opacity <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  opacity<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">op</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>opacity<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">op</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>opacity <span class="token operator">=</span> v<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Color<span class="token punctuation">.</span>opacity<span class="token punctuation">;</span>
Color<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="私有属性-方法"><a href="#私有属性-方法" aria-hidden="true" class="header-anchor">#</a> 私有属性/方法</h3> <p>在属性名或方法名前加上#，只能在类内部使用；<br>
私有属性/方法前面加上 static，变成静态私有属性和方法。</p> <h3 id="new-target"><a href="#new-target" aria-hidden="true" class="header-anchor">#</a> new.target</h3> <p>返回该 Class，子类继承父类时，内部指向子类本身。</p> <h3 id="继承"><a href="#继承" aria-hidden="true" class="header-anchor">#</a> 继承</h3> <p>子类 constructor 方法内部必须调用 super 来指向父类的 constructor 方法，之后 this 的指向才是子类的实例；<br>
子类继承父类的静态方法和属性。</p> <h3 id="object-新增静态方法"><a href="#object-新增静态方法" aria-hidden="true" class="header-anchor">#</a> Object 新增静态方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Color</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>Color<span class="token punctuation">)</span> <span class="token operator">===</span> Base<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="super"><a href="#super" aria-hidden="true" class="header-anchor">#</a> super</h3> <p>super 作为对象，在普通方法中，指向父类的原型对象；静态方法中，指向父类。</p> <h2 id="模块"><a href="#模块" aria-hidden="true" class="header-anchor">#</a> <span id="module" style="color: #000">模块</span></h2> <hr> <p>模块顶层 this 的值为 undefined，可以作为判断是否在模块中的依据；<br>
import 是在编译时，进行静态分析；require 是在运行时加载模块，动态加载功能；<br>
export 和 import 需要在模块顶层（任何位置）使用。</p> <h3 id="export"><a href="#export" aria-hidden="true" class="header-anchor">#</a> export</h3> <p>export 输出的接口，与其对应值是动态绑定关系，能够实时获取内部值；<br>
需要将导出的接口写在大括号内；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// baseColor.js</span>
<span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token string">&quot;#ffa500&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> opacity <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> getColor<span class="token punctuation">,</span> opacity <span class="token keyword">as</span> op <span class="token punctuation">}</span><span class="token punctuation">;</span>

后面可以跟变量声明语句<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> rgba <span class="token operator">=</span> <span class="token string">&quot;#ffa50000&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> rd <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  rd <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>getRandom<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> rd<span class="token punctuation">,</span> getRandom <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="import"><a href="#import" aria-hidden="true" class="header-anchor">#</a> import</h3> <p>import 会提升到整个模块头部，首先执行；<br>
需要将导入的接口写在大括号内；<br>
多次重复执行同一 import 语句，只会执行一次（Singleton 模式）；
是静态执行，不能使用表达式和变量（运行时才能得到的结构）；
整体加载用*代表一个对象，所有输出值都在这个对象上。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> getColor<span class="token punctuation">,</span> op <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./baseColor&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Color <span class="token keyword">from</span> <span class="token string">&quot;./baseColor&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="export-default"><a href="#export-default" aria-hidden="true" class="header-anchor">#</a> export default</h3> <p>默认导出时不需要大括号，对应的导入时也不需要大括号；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>导出的匿名函数可以在导入时自定义名称
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">import</span> getRandom <span class="token keyword">from</span> <span class="token string">'random'</span>

<span class="token keyword">function</span> <span class="token function">getRgb</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> getRgb
<span class="token comment">// 等同于</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">getRgb</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

后面不能跟变量声明语句
<span class="token keyword">let</span> color <span class="token operator">=</span> <span class="token string">'#ffa500'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> color<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="export-和-import-复合使用"><a href="#export-和-import-复合使用" aria-hidden="true" class="header-anchor">#</a> export 和 import 复合使用</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>第一种方式：内部不能使用color和getColor这两个接口，因为直接对外转发了
<span class="token keyword">export</span> <span class="token punctuation">{</span>color<span class="token punctuation">,</span> getColor<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./baseColor'</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>color<span class="token punctuation">,</span> getColor<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./baseColor'</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>color<span class="token punctuation">,</span> getColor<span class="token punctuation">}</span>

别名
<span class="token keyword">export</span> <span class="token punctuation">{</span>color <span class="token keyword">as</span> c<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./baseColor'</span>

全部导出，不包含baseColor模块的<span class="token keyword">default</span>方法
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./baseColor'</span>

默认接口
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token keyword">default</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./baseColor'</span>

具名接口改为默认接口
<span class="token keyword">export</span> <span class="token punctuation">{</span>color <span class="token keyword">as</span> <span class="token keyword">default</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./baseColor'</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>color<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./baseColor'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> color

默认接口改为具名接口
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token keyword">default</span> <span class="token keyword">as</span> color<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./baseColor'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="commonjs-和-es6-模块"><a href="#commonjs-和-es6-模块" aria-hidden="true" class="header-anchor">#</a> CommonJS 和 ES6 模块</h3> <ul><li>CommonJS 模块输出是一个值的拷贝，ES6 模块时值的引用</li> <li>CommonJS 模块是运行时加载，ES6 模块是编译时输出接口</li></ul> <h3 id="nodejs-加载"><a href="#nodejs-加载" aria-hidden="true" class="header-anchor">#</a> Nodejs 加载</h3> <p>在 Nodejs 中：</p> <ul><li>ES6 模块采用.mjs 后缀文件名，或者在 package.json 文件中将 type 字段指定为 module；</li> <li>CommonJS 模块使用.cjs 后缀名文件，或者在 package.json 文件中将 type 字段指定为 commonjs；</li> <li>.js 文件加载取决于 package.json 中的 type 字段；</li></ul> <h3 id="package-json"><a href="#package-json" aria-hidden="true" class="header-anchor">#</a> package.json</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>     <span class="token comment">// commonjs</span>
  <span class="token string">&quot;main&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>   <span class="token comment">// 入口文件</span>
	<span class="token comment">// 文件或子目录别名</span>
  <span class="token string">&quot;exports&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;./util&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;./src/util.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;./actions/&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;./src/actions/&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>


	<span class="token comment">// main的别名，字段名是.代码模块主入口，优先级高于main字段</span>
  <span class="token comment">// &quot;exports&quot;: {</span>
  <span class="token comment">//   &quot;.&quot;: &quot;./main.js&quot;</span>
  <span class="token comment">// }</span>
  <span class="token comment">// 等同于</span>
  <span class="token comment">// &quot;exports&quot;: &quot;./main.js&quot;,</span>


	<span class="token comment">// 条件加载，在NodeJS中运行，需打开--experimental-conditional-exports标志</span>
	<span class="token comment">// &quot;exports&quot;: {</span>
	<span class="token comment">// 	&quot;.&quot;: {</span>
	<span class="token comment">// 		&quot;require&quot;: &quot;./main.cjs&quot;,	// require条件指定require*()命令入口文件</span>
	<span class="token comment">// 		&quot;default&quot;: &quot;./main.js&quot;		// default条件指定其他情况入口</span>
	<span class="token comment">// 	}</span>
	<span class="token comment">// },</span>
	<span class="token comment">// 等同于</span>
	<span class="token comment">// &quot;exports&quot;: {</span>
	<span class="token comment">// 	&quot;require&quot;: &quot;./main.cjs&quot;,</span>
	<span class="token comment">// 	&quot;default&quot;: &quot;./main.js&quot;</span>
	<span class="token comment">// }</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>import 命令加载 CommonJS 模块只能整体加载，不能加载单一的输出项；<br>
require 命令不能加载 ES6 模块，需要使用 import()加载；<br>
Nodejs 内置模块可以整体加载，也可以指定输出项。</p> <h3 id="内部变量"><a href="#内部变量" aria-hidden="true" class="header-anchor">#</a> 内部变量</h3> <p>ES6 模块顶层 this 为 undefined，CommonJS 模块顶层 this 为当前模块。</p> <ul><li>arguments</li> <li>require</li> <li>module</li> <li>exports</li> <li>__filename</li> <li>__dirname</li></ul> <h3 id="加载机制"><a href="#加载机制" aria-hidden="true" class="header-anchor">#</a> 加载机制</h3> <p>Commonjs 在第一次加载时运行一次，会缓存到内存中；循环加载时，只会输出已经执行的部分，未执行部分不会输出。</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/14/2022, 11:32:12 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/learn/enhance/design.html" class="prev">
          设计模式
        </a></span> <span class="next"><a href="/learn/enhance/structure.html">
          数据结构
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.1d7e9e11.js" defer></script><script src="/assets/js/10.df41d32e.js" defer></script>
  </body>
</html>
